extend type Mutation @guard(with: ["api"]) @namespace(field: "Api\\Users\\GraphQL\\Resolvers") {
    updateProfile (
        gender: Int
        id: Int!
        profiles: [ProfileInput!]!
    ): User
        @validate(validator: "Api\\Users\\Validators\\UpdateProfileValidator")
        @field(resolver: "UserResolver@update")
}

extend type Query @guard(with: ["api"]) @namespace(field: "Api\\Users\\GraphQL\\Resolvers") {
    me: User
        @field(resolver: "UserResolver@me")

    users (
        filters: FilterInput
    ): [User]
        @field(resolver: "UserResolver@list")
}

input ProfileInput {
    given_name: String
    locale: String!
    nickname: String
    surname: String
}

type Profile {
    given_name: String
    id: Int!
    surname: String
}

type User {
    email: String!
    gender: Int
    id: Int!
    profiles: [Profile]
        @field(resolver: "Api\\Users\\Types\\UserGraphQLType@profiles")
    userRoles: [Role] @belongsToMany(relation: "userRoles")
    username: String!
}

type Role {
    id: Int
    role: String
    name: String
}
